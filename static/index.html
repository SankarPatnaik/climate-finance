<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Climate Finance Data Explorer</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.4/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <style>
      .card {
        box-shadow: 0 20px 45px rgba(15, 23, 42, 0.12);
      }
      .badge {
        background: linear-gradient(135deg, #38bdf8, #22c55e);
      }
    </style>
  </head>
  <body class="bg-slate-950 text-slate-100">
    <header class="bg-gradient-to-r from-emerald-600 to-sky-500 py-10">
      <div class="mx-auto max-w-6xl px-6 flex flex-col gap-4">
        <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
          <div>
            <p class="text-sm uppercase tracking-[0.2em] text-emerald-100">FastAPI + Pandas</p>
            <h1 class="mt-2 text-3xl font-semibold text-white sm:text-4xl">
              Climate Finance Data Explorer
            </h1>
            <p class="mt-3 max-w-3xl text-emerald-50">
              Query climate finance indicators by sector, indicator, or country. The API ships with a
              concise demo dataset and is ready to point at production data via <code>CLIMATE_DATA_PATH</code>.
            </p>
          </div>
          <span class="badge inline-flex h-fit items-center gap-2 rounded-full px-4 py-2 text-sm font-semibold text-white shadow-lg">
            Live JSON API
          </span>
        </div>
        <div class="mt-4 grid gap-3 sm:grid-cols-3">
          <div class="card rounded-xl bg-white/10 p-4 backdrop-blur">
            <p class="text-sm text-emerald-200">Endpoints</p>
            <p class="text-2xl font-semibold">5</p>
            <p class="text-xs text-slate-200">Sector, indicator, country, grouped variants, and chat.</p>
          </div>
          <div class="card rounded-xl bg-white/10 p-4 backdrop-blur">
            <p class="text-sm text-emerald-200">Data freshness</p>
            <p class="text-2xl font-semibold">2005â€“2022</p>
            <p class="text-xs text-slate-200">Demo dataset mirrors year-based aggregation columns.</p>
          </div>
          <div class="card rounded-xl bg-white/10 p-4 backdrop-blur">
            <p class="text-sm text-emerald-200">Extensible</p>
            <p class="text-2xl font-semibold">Env driven</p>
            <p class="text-xs text-slate-200">Swap datasets & chat keys via environment variables.</p>
          </div>
        </div>
      </div>
    </header>

    <main class="mx-auto max-w-6xl px-6 py-10">
      <section class="grid gap-6 md:grid-cols-3">
        <div class="card rounded-xl bg-white/5 p-6">
          <h2 class="text-lg font-semibold text-white">Quick Start</h2>
          <ol class="mt-4 space-y-3 text-sm text-slate-200">
            <li class="flex gap-3">
              <span class="flex h-7 w-7 items-center justify-center rounded-full bg-emerald-500/80 text-sm font-bold text-white">1</span>
              <div>
                <p class="font-semibold text-white">Install dependencies</p>
                <code class="mt-1 block rounded bg-black/40 px-2 py-1">pip install -r requirements.txt</code>
              </div>
            </li>
            <li class="flex gap-3">
              <span class="flex h-7 w-7 items-center justify-center rounded-full bg-emerald-500/80 text-sm font-bold text-white">2</span>
              <div>
                <p class="font-semibold text-white">Run the server</p>
                <code class="mt-1 block rounded bg-black/40 px-2 py-1">uvicorn api:app --reload --port 5000</code>
              </div>
            </li>
            <li class="flex gap-3">
              <span class="flex h-7 w-7 items-center justify-center rounded-full bg-emerald-500/80 text-sm font-bold text-white">3</span>
              <div>
                <p class="font-semibold text-white">Explore the docs</p>
                <p class="text-slate-300">Visit <a class="text-emerald-300 underline" href="/docs">/docs</a> for interactive OpenAPI.</p>
              </div>
            </li>
          </ol>
          <p class="mt-4 text-xs text-slate-400">Configure <code>CLIMATE_DATA_PATH</code> and <code>GROQ_API_KEY</code> to point at production-grade resources.</p>
        </div>

        <div class="card rounded-xl bg-white/5 p-6 md:col-span-2">
          <div class="flex items-start justify-between gap-4">
            <div>
              <h2 class="text-lg font-semibold text-white">Example Query</h2>
              <p class="text-sm text-slate-300">Fetch transport-related activity for Australia.</p>
            </div>
            <span class="rounded-full bg-emerald-500/20 px-3 py-1 text-xs font-semibold text-emerald-200">GET /sector</span>
          </div>
          <div class="mt-4 space-y-3">
            <code class="block rounded bg-black/50 p-3 text-xs text-emerald-100">/sector?country=Australia&sector=Transport</code>
            <pre id="sample-response" class="card overflow-x-auto rounded-lg bg-black/70 p-4 text-xs text-emerald-50">Click "Run" to see sample output</pre>
            <button id="run-button" class="inline-flex items-center gap-2 rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-emerald-950 transition hover:bg-emerald-400">
              <span>Run sample</span>
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 3v4" /><path d="M19 17v4" /><path d="M5 7c3.13 3.14 7.87 3.14 11 0" /><path d="M5 21v-4" /><path d="M19 7v-4" /><path d="M19 17a10.42 10.42 0 0 1-14 0" />
              </svg>
            </button>
          </div>
        </div>
      </section>

      <section class="mt-8 grid gap-6 md:grid-cols-2">
        <div class="card rounded-xl bg-white/5 p-6">
          <h2 class="text-lg font-semibold text-white">Endpoints</h2>
          <ul class="mt-4 space-y-3 text-sm text-slate-200">
            <li class="flex items-start gap-3">
              <span class="mt-1 h-2.5 w-2.5 rounded-full bg-emerald-400"></span>
              <div>
                <p class="font-semibold text-white">/sector &amp; /group/sector</p>
                <p>Aggregate values by sector, optionally grouped by indicator.</p>
              </div>
            </li>
            <li class="flex items-start gap-3">
              <span class="mt-1 h-2.5 w-2.5 rounded-full bg-emerald-400"></span>
              <div>
                <p class="font-semibold text-white">/indicator &amp; /group/indicator</p>
                <p>Aggregate values by indicator, optionally grouped by sector.</p>
              </div>
            </li>
            <li class="flex items-start gap-3">
              <span class="mt-1 h-2.5 w-2.5 rounded-full bg-emerald-400"></span>
              <div>
                <p class="font-semibold text-white">/country</p>
                <p>Summaries grouped by country and ISO3 codes.</p>
              </div>
            </li>
            <li class="flex items-start gap-3">
              <span class="mt-1 h-2.5 w-2.5 rounded-full bg-emerald-400"></span>
              <div>
                <p class="font-semibold text-white">/chat</p>
                <p>LLM-backed responses. Requires <code>GROQ_API_KEY</code>.</p>
              </div>
            </li>
          </ul>
        </div>
        <div class="card rounded-xl bg-white/5 p-6">
          <h2 class="text-lg font-semibold text-white">Operational Notes</h2>
          <ul class="mt-4 list-disc space-y-2 pl-5 text-sm text-slate-200">
            <li>Swap the dataset path with <code>CLIMATE_DATA_PATH</code> (CSV with yearly columns).</li>
            <li>Enable chat by supplying <code>GROQ_API_KEY</code> as an environment variable.</li>
            <li>All endpoints return tidy arrays with <code>years</code> objects for easier charting.</li>
            <li>Default sample data covers Australia, Canada, and Germany across multiple sectors.</li>
          </ul>
        </div>
      </section>
    </main>

    <script>
      const button = document.getElementById('run-button');
      const output = document.getElementById('sample-response');
      const sampleUrl = '/sector?country=Australia&sector=Transport';

      button.addEventListener('click', async () => {
        output.textContent = 'Loading...';
        try {
          const response = await fetch(sampleUrl);
          const json = await response.json();
          output.textContent = JSON.stringify(json, null, 2);
        } catch (error) {
          output.textContent = 'Unable to fetch sample data. Is the API running?';
        }
      });
    </script>
  </body>
</html>
